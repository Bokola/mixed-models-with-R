---
title: "Standard Linear Model Review"
output: 
  html_notebook: 
    code_folding: hide
---


Yesterday you got a look at how to run regression models in R. The nice thing about R relative to most other statistical programs and other languages is that most every modeling package works the same way, and uses the same functions to do things with the model afterward.  As we move into mixed models, the approach will be almost identical. As an example here are 5 model functions from 4 different packages. Each one could be followed by `summary`, `plot`, `fitted`, and other methods.

```{r, eval=FALSE}
lm(y ~ x)
glm(y ~ x, family=binomial)
brm(y ~ x)
gam(y ~ s(x))
lmer(y ~ x + (1|x))
```

The more you get comfortable with even just basic `lm` and how it works, the more you are actually getting acquainted with many other modeling packages.


# Exercise 1

We'll use the ggplot2movies package and the `movies` data frame inside.  You'll likely need to install the ggplot2movies package.

```{r}
library(dplyr)
library(ggplot2movies)
glimpse(movies)
movies %>% 
  group_by(Action, Drama) %>% 
  summarise(rating=mean(rating))
```

First we'll trim things to more recent movies to make things a little more comparable.  Next, let's look at the relationship of time (`year`) and budget to rating. Use the lm function to predict rating and interpret the results.

```{r}
movies_trim = filter(movies, year>1970 & budget>1e6 & votes>1000) %>% 
  mutate(log_budget = log(budget),
         votes = votes/1000)
```



```{r, eval=FALSE}
model = lm()
summary(model)
```

We can get the fitted values using the fitted function, or automatically add them to the data via modelr.

```{r, eval=FALSE}
library(modelr)
head(fitted(model))

movies_trim %>% 
  add_predictions(model, var = 'fitted')
```

The broom package can add even more with the augment function, and will return
```{r, eval=FALSE}
library(broom)
augment(model) %>% 
  head()
```


# Exercise 2

Add the `Action` indicator and the number of votes to the model.

```{r}
model = lm(rating ~ year + log_budget + votes + Action, data=movies_trim)
summary(model)
```


# Exercise 3

See if Action interacts with budget. Interpret the results.

```{r}
model = lm(rating ~ year + votes + log_budget*Action, data=movies_trim)
summary(model)
```
  
  
  